# Часть 3: Использование готовых MCP-серверов

В **части 1** мы изучили основы tool calling и поняли, что языковые модели взаимодействуют с инструментами через структурированный вывод.

В **части 2** мы создали собственный MCP-сервер для конвертации документов и научились запускать его через STDIO транспорт.

В **этой части** мы научимся использовать уже существующие MCP-серверы, созданные сообществом.

## Зачем использовать готовые серверы?

Представьте, что вам нужно дать языковой модели возможность работать с веб-страницами - скачивать их содержимое и анализировать. Можно написать свой сервер с нуля, но гораздо эффективнее воспользоваться готовым решением. Именно для этого существует экосистема MCP-серверов - разработчики создают инструменты для популярных задач и делятся ими с сообществом.

Готовые серверы избавляют от необходимости реализовывать типовую функциональность самостоятельно. Вместо написания кода для работы с API, парсинга данных или интеграции с внешними сервисами вы просто устанавливаете пакет и подключаете его к своему агенту. Это экономит время и позволяет сосредоточиться на бизнес-логике приложения.

## Сервер mcp-server-fetch

Взят из [официального репозитория MCP серверов](https://github.com/modelcontextprotocol/servers/tree/main/src/fetch) и предоставляет языковой модели возможность загружать веб-страницы.

Основная задача этого сервера - конвертировать HTML-страницы в markdown формат, с которым моделям гораздо проще работать. Вместо того чтобы парсить сложную структуру HTML с кучей тегов, стилей и скриптов, модель получает чистый текст с сохраненной структурой заголовков, списков и ссылок.

Сервер предоставляет инструмент `fetch` с несколькими параметрами. Обязательный параметр `url` указывает, какую страницу нужно загрузить. Параметр `max_length` ограничивает размер возвращаемого текста - по умолчанию 5000 символов, чтобы не перегружать контекст модели. Если страница большая, можно использовать параметр `start_index` для чтения контента по частям, как pagination. Есть также параметр `raw`, который возвращает исходный HTML вместо markdown, если это необходимо.

Важный момент безопасности: сервер может обращаться к локальным адресам, включая внутренние IP вашей сети. Это нужно учитывать при развертывании в production.

## Установка готовых серверов

MCP-серверы распространяются как обычные пакеты для разных языков программирования. Большинство официальных серверов написаны на TypeScript и доступны через npm. Также существуют серверы на Python, которые можно установить через pip.

Для запуска `mcp-server-fetch` есть несколько способов. Самый простой - использовать `uvx`, который автоматически скачивает и запускает пакет:

```bash
uvx mcp-server-fetch
```

Для использования в Python с помощью pip нужно найти соответствующую обертку или использовать серверы, специально написанные на Python. В нашем примере мы используем `uvx` для простоты.

## Подключение к агенту

Процесс подключения готового сервера практически идентичен тому, как мы подключали собственный сервер в предыдущей части. Создаем STDIO транспорт, указывая команду запуска сервера, и подключаем его через клиент:

```python
from fastmcp import Client
from fastmcp.client.transports import StdioTransport

transport = StdioTransport(command="uvx", args=["mcp-server-fetch"])

async with Client(transport) as client:
    # Получаем список доступных инструментов
    tools_list = await client.list_tools()

    # Загружаем инструменты для использования в агенте
    tools = await load_mcp_tools(client.session)

    # Создаем агента с этими инструментами
    agent = create_agent(llm, tools)
```

В примере `example.py` вы можете увидеть полный рабочий код, где агент получает задание загрузить страницу с документацией LangGraph и создать краткое резюме ключевых моментов. Агент автоматически вызывает инструмент `fetch`, получает markdown версию страницы и формирует ответ на основе этого контента.

## Где искать готовые серверы

Экосистема MCP активно развивается, и уже существует множество готовых решений для разных задач. Два основных ресурса для поиска серверов - [Docker Hub MCP](https://hub.docker.com/mcp/explore) и [Glama MCP Servers](https://glama.ai/mcp/servers). Там можно найти серверы для работы с базами данных, файловыми системами, API популярных сервисов, системами мониторинга и многим другим.

Помимо готовых универсальных инструментов существуют и специализированные серверы для научных задач. Например, [academia_mcp](https://github.com/IlyaGusev/academia_mcp) предоставляет инструменты для работы с научными публикациями, поиска статей и анализа академических данных.

## Открытость и переиспользование

Model Context Protocol - это открытый стандарт, и вся экосистема построена на принципах open source. Это означает, что вы можете не только использовать готовые решения других разработчиков, но и делиться своими наработками с сообществом.

Когда вы создаете MCP-сервер для решения своей задачи, подумайте о том, чтобы опубликовать его. Возможно, кому-то ещё пригодится та же функциональность. Более того, другие разработчики смогут улучшить ваш код, добавить новые возможности, исправить баги - именно так работает open source. Ваш небольшой инструмент может стать частью чьего-то большого проекта.

Открытость MCP также означает, что вы можете изучать реализацию любого существующего сервера, понимать, как он устроен внутри, и адаптировать под свои нужды. Нет vendor lock-in, нет закрытых API - весь код доступен, документирован и может быть модифицирован.

Именно благодаря этой открытости экосистема MCP растет так быстро. От простых утилит до сложных научных инструментов - всё это создается и поддерживается сообществом разработчиков по всему миру.
